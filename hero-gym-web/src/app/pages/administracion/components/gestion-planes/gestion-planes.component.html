<div class="bg-white rounded-2xl shadow-md p-6 border border-gray-100">
  <!-- Encabezado -->
  <div class="flex items-center justify-between mb-6">
    <h2 class="text-lg font-semibold text-gray-900 flex items-center gap-2">
      <lucide-icon name="list" class="w-5 h-5 text-indigo-600"></lucide-icon>
      Gestión de Planes
    </h2>

    <button
      (click)="abrirModal()"
      class="flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition"
      >
      <lucide-icon name="plus" class="w-4 h-4"></lucide-icon>
      Nuevo Plan
    </button>
  </div>

  <!-- Lista de planes desde backend -->
  @if (planes.length) {
    <div class="space-y-3">
      @for (plan of planes; track plan.id) {
        <div
          class="flex justify-between items-center border border-gray-200 rounded-xl px-4 py-3 hover:shadow-sm transition"
          >
          <div>
            <p class="font-semibold text-gray-900">{{ plan.nombre }}</p>
            <p class="text-sm text-gray-500">{{ plan.duracion }} {{ getUnidadTexto(plan) }} • ${{ plan.precio }}</p>
          </div>
          <div class="flex items-center gap-3">
            <span class="text-indigo-600 text-sm font-medium">Activo</span>
            <button
              (click)="eliminarPlan(plan)"
              class="text-red-500 hover:text-red-700 transition"
              title="Eliminar plan"
            >
              <lucide-icon name="trash-2" class="w-4 h-4"></lucide-icon>
            </button>
          </div>
        </div>
      }
    </div>

    <!-- Paginación -->
    <div class="flex items-center justify-between mt-6 pt-4 border-t border-gray-200">
      <div class="text-sm text-gray-600">
        Página {{ paginaActual }} de {{ totalPaginas }} • Total: {{ totalPlanes }} planes
      </div>
      
      <div class="flex items-center gap-2">
        <button
          (click)="paginaAnterior()"
          [disabled]="paginaActual === 1"
          class="px-3 py-1 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition"
        >
          Anterior
        </button>
        
        <button
          (click)="paginaSiguiente()"
          [disabled]="paginaActual === totalPaginas"
          class="px-3 py-1 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition"
        >
          Siguiente
        </button>
      </div>
    </div>
  } @else {
    <p class="text-sm text-gray-500">No hay planes registrados.</p>
  }
</div>

<!-- Modal -->
@if (mostrarModal) {
  <app-plan-modal
    (close)="cerrarModal()"
    (save)="guardarPlan($event)"
  ></app-plan-modal>
}

